<% @sku_productships.each_with_index do |sku_productship,index| %>
  <tr class="<%= set_odd_even_class index  %>" group="<%= index %>">
    <td><%= index+1 %></td>
    <td><%= sku_productship.product.product_id %></td>
    <td><%= sku_productship.product.name %></td>
    <td><input class="numeric integer optional package_num" id="<%= sku_productship.id %>"  step="any" type="number" value="<%= sku_productship.package_num %>" /></td>
    <td><%= text_field_tag 'package_name', sku_productship.package_name, :class => "package_name", :id => sku_productship.id %></td>
    <td><input class="numeric decimal optional sales_bef_tax" id="<%= sku_productship.id %>"  step="any" type="number" value="<%= sku_productship.sales_bef_tax %>" /></td>
    <td><input class="numeric decimal optional sales_aft_tax" id="<%= sku_productship.id %>"  step="any" type="number" value="<%= sku_productship.sales_aft_tax %>" /></td>
    <td><%= check_box_tag 'is_main', true, sku_productship.is_main %></td>
    <td><a href="#" class="destroy_sku_product" title="<%= sku_productship.id %>">删除</a></td>
  </tr>
<% end %>

<script type="text/javascript">
 jQuery(".destroy_sku_product").click(function(){
  jQuery.ajax({
    type: "delete",
    url: "/admin/sku_productships/"+jQuery(this).attr('title'),
    data: "",
    success: function(result){
     jQuery("#sku_productships").html(result);
    }
  });
 });

 jQuery(".package_num").change(function(){
   jQuery.ajax({
     type: "put",
     url: "/admin/sku_productships/"+jQuery(this).attr('id'),
     data: {"sku_productship[package_num]" : jQuery(this).val()},
     success: function(result){
      jQuery("#sku_productships").html(result);
     }
   });
 });

 jQuery(".package_name").change(function(){
   jQuery.ajax({
     type: "put",
     url: "/admin/sku_productships/"+jQuery(this).attr('id'),
     data: {"sku_productship[package_name]" : jQuery(this).val()},
     success: function(result){
      jQuery("#sku_productships").html(result);
     }
   });
 });

 jQuery(".sales_bef_tax").change(function(){
   jQuery.ajax({
     type: "put",
     url: "/admin/sku_productships/"+jQuery(this).attr('id'),
     data: {"sku_productship[sales_bef_tax]" : jQuery(this).val()},
     success: function(result){
      jQuery("#sku_productships").html(result);
     }
   });
 });

 jQuery(".sales_aft_tax").change(function(){
   jQuery.ajax({
     type: "put",
     url: "/admin/sku_productships/"+jQuery(this).attr('id'),
     data: {"sku_productship[sales_aft_tax]" : jQuery(this).val()},
     success: function(result){
      jQuery("#sku_productships").html(result);
     }
   });
 });
</script>