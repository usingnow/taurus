<%= form_for @promotion_by_product, :url => preview_promotion_promotion_by_products_path do |f| %>
  <%= f.fields_for :online_promotion do |op_f| %>
    <div id="show_info">
      <%= error_messages @promotion_by_product %>
      <h1>新建活动：<span class="red">*</span>为必填</h1>
      <ul>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.code' %><abbr title="required">*</abbr></label>
          <%= op_f.text_field :code %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.title' %><abbr title="required">*</abbr></label>
          <%= op_f.text_field :title %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.online_promotionable_type' %><abbr title="required">*</abbr></label>
          <span class="red">商品类</span>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.promotion_type' %><abbr title="required">*</abbr></label>
          <%= op_f.collection_select :promotion_type, OnlinePromotion::PROMOTION_TYPE, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.start' %><abbr title="required">*</abbr></label>
          <%= op_f.datetime_select :start %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.end' %><abbr title="required">*</abbr></label>
          <%= op_f.datetime_select :end, :default => 5.years.from_now %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.description' %><abbr title="required">*</abbr></label>
          <%= op_f.text_area :description, :cols => 60, :rows => 5 %>
        </li>
      </ul>

      <h1>活动规则：若选项为空或为“0”，即表示无限制</h1>
      <ul>
        <li>
          <label><%= t 'activerecord.attributes.promotion_by_product.products_selection' %></label>
          <%= f.collection_select :products_selection, PromotionByProduct::PRODUCTS_SELECTION, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.promotion_by_product.promotion_basis' %></label>
          <%= f.collection_select :promotion_basis, PromotionByProduct::PROMOTION_BASIS, :first, :second %>
          <%= f.text_field :basis_parameter %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.min_member_point' %></label>
          <span>大于<%= op_f.text_field :min_member_point %>分</span>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.sign_up_time_limit' %></label>
          <%= op_f.collection_select :sign_up_time_limit, OnlinePromotion::SIGN_UP_TIME_LIMIT, :first, :second  %>
        </li>
        <li>
          <label class="indent2em"><%= t 'activerecord.attributes.online_promotion.member_sign_up_start' %></label>
          <%= op_f.date_select :member_sign_up_start, :disabled => true %>
        </li>
        <li>
          <label class="indent2em"><%= t 'activerecord.attributes.online_promotion.member_sign_up_end' %></label>
          <%= op_f.date_select :member_sign_up_end, :disabled => true %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.member_type' %></label>
          <%= op_f.collection_select :member_type, OnlinePromotion::MEMBER_TYPE, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.order_channel' %></label>
          <%= op_f.collection_select :order_channel, OnlinePromotion::ORDER_CHANNEL, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.procedure_id' %></label>
          <%= op_f.collection_select :procedure_id, Procedure.activated, :id, :name, :include_blank => "无限制" %>
        </li>
      </ul>

      <h1>活动内容</h1>
      <ul>
        <li>
         <label><%= t 'activerecord.attributes.promotion_by_product.product_discount' %></label>
          <%= f.text_field :product_discount %>
          <span class="red">说明：输入1为全价，输入0.95为95折</span>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.free_installation' %></label>
          <%= op_f.collection_radio :free_installation, OnlinePromotion::FREE_INSTALLATION, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.free_assembling' %></label>
          <%= op_f.collection_radio :free_assembling, OnlinePromotion::FREE_ASSEMBLING, :first, :second %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.points_promotion_method' %></label>
          <%= op_f.collection_select :points_promotion_method, OnlinePromotion::POINTS_PROMOTION_METHOD, :first, :second %>
          <%= op_f.text_field :points_promotion_parameter %>
        </li>
        <li>
          <label><%= t 'activerecord.attributes.online_promotion.sku_id' %></label>
          <%= text_field_tag :sku_name, nil, :readonly => true %>
          <%= link_to "清空", "#", :id => "empty_sku", :class => "link" %>
          <%= link_to "设置", "#", :id => "set_sku", :class => "link" %>
          <%= op_f.hidden_field :sku_id, :id => "sku_id" %>
        </li>
      </ul>
    </div>
  <% end %>

  <%= f.submit "预览" %>
<% end %>
